<?php # script 10.4
// this script retrieves all the records from the users table using pagination

$page_title = 'View Current Users';
include('includes/header.html');

echo '<h2>Registred Users</h2>';

// number of records per page
$display = 10;

// determine how many pages there are
if(isset$_GET['p'] && is_numeric($_GET['p'])){
	$pages = $_GET['p'];
} else {
	// count the nuumber of records
	$q = "select count(user_id) from users";
	$r = @mysqli_query($dbc, $q);
	$row = @mysqli_fetch_aray($r, MYSQLI_NUM);
	$records = $row[0];
	// calculate the number of pages
	if($records > $display){
		$pages = ceil($records/$display);
	} else {
		$pages = 1;
	}
}

// determine where in the database to start returning results
if(isset($_GET['s']) && is_numeric($_GET['s'])){
	$start = $_GET['s'];
} else {
	$start = 0;
}

// define the query
$q = "select last_name, first_name, date_format(registation_date, '%M %d, %Y') as dr, user_id from users order by registration_date asc limit $start, $display";
$r = mysqli_query($dbc, $q);

// table
echo '<table width="60%">
	<thead>
		<tr>
			<th align="left"><strong>Edit</strong></th>
			<th align="left"><strong>Delete</strong></th>
			<th align="left"><strong>Last Name</strong></th>
			<th align="left"><strong>First Name</strong></th>
			<th align="left"><strong>Date registered</strong></th>
		</tr>
	</thead>
';




?>
